<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Рекомендательная система локаций для бизнеса: Go + OpenSearch | Персональный блог бэкенд-разработчика</title><meta name=keywords content="go,opensearch,postgresql,микросервисы,рекомендательные системы,преподавание"><meta name=description content="Недавно я подготовил рабочий прототип проекта go_es_analytical_system - рекомендательной системы для поиска и анализа локаций для различных типов бизнеса. Здесь es в названии появилось из-за того, что я плинировал Elasticsearch, но при разработке возникли сложности при получении соответствующего контейнера, поэтому в итоге используется OpenSearch.
Важный момент: идея проекта принадлежит моим студентам, которые выбрали себе тему магистерской диссертации &ldquo;Разработка приложения для анализа бизнес-среды и выдачи рекомендаций по старту бизнеса&rdquo;. Да, одну на двоих. Сейчас это допустимо в рамках продолжения работ по дисциплине &ldquo;Проектная деятельность&rdquo;. У них была готова концепция и понимание, что нужно решить, а я предложил технологии и реализацию. Умение качественно оформить свои идеи привело к утверждению темы и к созданию данного прототипа. Я подготовил текущий рабочий прототип, а они будут дорабатывать систему, создавать фронтенд-часть и расширять функциональность."><meta name=author content="akozadaev"><link rel=canonical href=https://akozadaev.github.io/myblog/posts/go-es-analytical-system/><link crossorigin=anonymous href=/myblog/assets/css/stylesheet.a5781257de4197b8e3d54346acdf1dd55a9ba4cb91dcace192fc1baf228c08b5.css integrity="sha256-pXgSV95Bl7jj1UNGrN8d1VqbpMuR3KzhkvwbryKMCLU=" rel="preload stylesheet" as=style><link rel=icon href=https://akozadaev.github.io/myblog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://akozadaev.github.io/myblog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://akozadaev.github.io/myblog/favicon-32x32.png><link rel=apple-touch-icon href=https://akozadaev.github.io/myblog/apple-touch-icon.png><link rel=mask-icon href=https://akozadaev.github.io/myblog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://akozadaev.github.io/myblog/posts/go-es-analytical-system/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://akozadaev.github.io/myblog/posts/go-es-analytical-system/"><meta property="og:site_name" content="Персональный блог бэкенд-разработчика"><meta property="og:title" content="Рекомендательная система локаций для бизнеса: Go + OpenSearch"><meta property="og:description" content="Недавно я подготовил рабочий прототип проекта go_es_analytical_system - рекомендательной системы для поиска и анализа локаций для различных типов бизнеса. Здесь es в названии появилось из-за того, что я плинировал Elasticsearch, но при разработке возникли сложности при получении соответствующего контейнера, поэтому в итоге используется OpenSearch.
Важный момент: идея проекта принадлежит моим студентам, которые выбрали себе тему магистерской диссертации “Разработка приложения для анализа бизнес-среды и выдачи рекомендаций по старту бизнеса”. Да, одну на двоих. Сейчас это допустимо в рамках продолжения работ по дисциплине “Проектная деятельность”. У них была готова концепция и понимание, что нужно решить, а я предложил технологии и реализацию. Умение качественно оформить свои идеи привело к утверждению темы и к созданию данного прототипа. Я подготовил текущий рабочий прототип, а они будут дорабатывать систему, создавать фронтенд-часть и расширять функциональность."><meta property="og:locale" content="ru-ru"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-12-14T12:00:00+03:00"><meta property="article:modified_time" content="2025-12-14T12:00:00+03:00"><meta property="article:tag" content="Go"><meta property="article:tag" content="Opensearch"><meta property="article:tag" content="Postgresql"><meta property="article:tag" content="Микросервисы"><meta property="article:tag" content="Рекомендательные Системы"><meta property="article:tag" content="Преподавание"><meta name=twitter:card content="summary"><meta name=twitter:title content="Рекомендательная система локаций для бизнеса: Go + OpenSearch"><meta name=twitter:description content="Недавно я подготовил рабочий прототип проекта go_es_analytical_system - рекомендательной системы для поиска и анализа локаций для различных типов бизнеса. Здесь es в названии появилось из-за того, что я плинировал Elasticsearch, но при разработке возникли сложности при получении соответствующего контейнера, поэтому в итоге используется OpenSearch.
Важный момент: идея проекта принадлежит моим студентам, которые выбрали себе тему магистерской диссертации &ldquo;Разработка приложения для анализа бизнес-среды и выдачи рекомендаций по старту бизнеса&rdquo;. Да, одну на двоих. Сейчас это допустимо в рамках продолжения работ по дисциплине &ldquo;Проектная деятельность&rdquo;. У них была готова концепция и понимание, что нужно решить, а я предложил технологии и реализацию. Умение качественно оформить свои идеи привело к утверждению темы и к созданию данного прототипа. Я подготовил текущий рабочий прототип, а они будут дорабатывать систему, создавать фронтенд-часть и расширять функциональность."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://akozadaev.github.io/myblog/posts/"},{"@type":"ListItem","position":2,"name":"Рекомендательная система локаций для бизнеса: Go + OpenSearch","item":"https://akozadaev.github.io/myblog/posts/go-es-analytical-system/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Рекомендательная система локаций для бизнеса: Go + OpenSearch","name":"Рекомендательная система локаций для бизнеса: Go \u002b OpenSearch","description":"Недавно я подготовил рабочий прототип проекта go_es_analytical_system - рекомендательной системы для поиска и анализа локаций для различных типов бизнеса. Здесь es в названии появилось из-за того, что я плинировал Elasticsearch, но при разработке возникли сложности при получении соответствующего контейнера, поэтому в итоге используется OpenSearch.\nВажный момент: идея проекта принадлежит моим студентам, которые выбрали себе тему магистерской диссертации \u0026ldquo;Разработка приложения для анализа бизнес-среды и выдачи рекомендаций по старту бизнеса\u0026rdquo;. Да, одну на двоих. Сейчас это допустимо в рамках продолжения работ по дисциплине \u0026ldquo;Проектная деятельность\u0026rdquo;. У них была готова концепция и понимание, что нужно решить, а я предложил технологии и реализацию. Умение качественно оформить свои идеи привело к утверждению темы и к созданию данного прототипа. Я подготовил текущий рабочий прототип, а они будут дорабатывать систему, создавать фронтенд-часть и расширять функциональность.\n","keywords":["go","opensearch","postgresql","микросервисы","рекомендательные системы","преподавание"],"articleBody":"Недавно я подготовил рабочий прототип проекта go_es_analytical_system - рекомендательной системы для поиска и анализа локаций для различных типов бизнеса. Здесь es в названии появилось из-за того, что я плинировал Elasticsearch, но при разработке возникли сложности при получении соответствующего контейнера, поэтому в итоге используется OpenSearch.\nВажный момент: идея проекта принадлежит моим студентам, которые выбрали себе тему магистерской диссертации “Разработка приложения для анализа бизнес-среды и выдачи рекомендаций по старту бизнеса”. Да, одну на двоих. Сейчас это допустимо в рамках продолжения работ по дисциплине “Проектная деятельность”. У них была готова концепция и понимание, что нужно решить, а я предложил технологии и реализацию. Умение качественно оформить свои идеи привело к утверждению темы и к созданию данного прототипа. Я подготовил текущий рабочий прототип, а они будут дорабатывать систему, создавать фронтенд-часть и расширять функциональность.\nХочу поделиться опытом и рассказать, какие задачи решает эта система и какие технологии было решено использовать.\nЗачем это нужно? Представьте ситуацию: вы хотите открыть кафе, ресторан или магазин. Где лучше разместить бизнес? Какие факторы учесть?\nТрафик - сколько людей проходит мимо локации Конкуренция - сколько похожих заведений уже есть рядом Демография - кто живёт и работает в этом районе Доступность - удобно ли добираться Ручной анализ таких данных занимает недели. Система делает это за секунды, используя комбинацию PostgreSQL для справочников и OpenSearch для полнотекстового поиска и ранжирования.\nАрхитектура решения Технологический стек Go - основной язык разработки OpenSearch - поиск и ранжирование локаций PostgreSQL - хранение справочников (типы бизнеса, регионы) Docker Compose - оркестрация сервисов Swagger/OpenAPI - автоматическая документация API Почему именно такой стек? Go - быстро, без зависимостей, один бинарник, умею. Идеально для микросервисов и CI/CD.\nOpenSearch - открытый поисковый движок, форк Elasticsearch, с поддержкой:\nГеопространственных запросов (geo_point) Векторного поиска (dense_vector для kNN) Полнотекстового поиска Гибкого ранжирования Полная совместимость с Elasticsearch API Выбор OpenSearch вместо Elasticsearch был сделан по нескольким причинам:\nОткрытая лицензия (Apache 2.0) Нет проблем с доступом к образам Docker Активное развитие сообществом Совместимость с существующими инструментами PostgreSQL - надёжное хранение структурированных справочников с поддержкой транзакций.\nКак это работает? Алгоритм рекомендаций Система использует трёхэтапный подход:\nФильтрация:\nПо региону и городу По типу бизнеса (локация должна подходить для запрошенного типа) Ранжирование:\nTraffic Score (0-10) - чем выше, тем лучше. Бустинг для локаций с score \u003e= 7.0 Competition Density (0-10) - чем ниже, тем лучше. Бустинг для локаций с density \u003c= 3.0 Демография - соответствие целевой аудитории (возраст, доход, интересы) Сортировка:\nПо релевантности (комбинированный score) По traffic_score (по убыванию) По competition_density (по возрастанию) Структура данных в OpenSearch { \"id\": \"loc_1\", \"name\": \"Локация 1\", \"address\": \"ул. Примерная, д. 10, Москва\", \"coordinates\": { \"lat\": 55.7558, \"lon\": 37.6173 }, \"region\": \"Москва\", \"city\": \"Москва\", \"business_types_suitable\": [\"cafe\", \"restaurant\"], \"traffic_score\": 8.5, \"competition_density\": 2.3, \"demographics\": { \"age_group\": \"26-35\", \"average_income\": 75000, \"interests\": [\"food\", \"technology\"], \"population_density\": 5000 }, \"embedding\": [0.1, 0.2, ...] // 128-мерный вектор для kNN } API и использование Основные эндпоинты POST /locations/recommend - получить рекомендации:\ncurl -X POST http://localhost:8080/locations/recommend \\ -H \"Content-Type: application/json\" \\ -d '{ \"region\": \"Москва\", \"city\": \"Москва\", \"business_type\": \"cafe\", \"limit\": 20 }' GET /locations/{id} - детали локации\nGET /business-types - список типов бизнеса\nGET /regions - список регионов\nАвтоматическая документация Проект использует swaggo/swag для генерации OpenAPI документации из комментариев в коде:\nmake swagger # Открыть http://localhost:8080/swagger/index.html Это экономит время на поддержке документации - она всегда актуальна.\nЗапуск и разработка Быстрый старт с Docker # Запуск всех сервисов docker-compose up -d # Индексация тестовых данных docker-compose exec app ./indexer Система запускает:\nOpenSearch на порту 9200 OpenSearch Dashboards на порту 5601 PostgreSQL на порту 5432 Go приложение на порту 8080 Локальная разработка # Запуск только БД и OpenSearch docker-compose up -d opensearch postgres # Установка зависимостей go mod download # Запуск сервера go run cmd/server/main.go # Индексация данных go run cmd/indexer/main.go Решённые проблемы 1. Выбор поискового движка Изначально рассматривался Elasticsearch, но при работе с официальными образами иногда возникают проблемы с доступом (403 ошибки). Поэтому был выбран OpenSearch - открытый форк Elasticsearch, который:\nПолностью совместим с Elasticsearch API Имеет открытую лицензию Apache 2.0 Не имеет проблем с доступом к образам Docker Активно развивается сообществом 2. Производительность поиска Для ускорения поиска используется:\nГеопространственные индексы для координат Векторные индексы для семантического поиска Бустинг релевантных локаций в ранжировании 3. Масштабируемость Архитектура позволяет:\nГоризонтально масштабировать OpenSearch Использовать read replicas для PostgreSQL Добавлять кэширование (Redis) при необходимости Что нужно улучшить и доработать Студенты планируют доработать следующие аспекты:\nФронтенд-часть - веб-интерфейс для визуализации рекомендаций и работы с данными Кэширование - добавить Redis для часто запрашиваемых рекомендаций ML-модели - использовать обученные модели для более точного ранжирования Real-time обновления - подписка на изменения через WebSocket Аналитика - сбор метрик использования API и визуализация данных A/B тестирование - сравнение разных алгоритмов ранжирования Расширенная аналитика - более глубокий анализ бизнес-среды Эти доработки желаемы, но не являются обязательством ребят. Они сделают то, что считают необходимым в рамках работы. Прототип, который мы сделали уже содержит значительную базу\nВыводы Проект показал, что комбинация Go + OpenSearch + PostgreSQL - мощный инструмент для построения рекомендательных систем. Особенно ценна возможность:\nБыстро прототипировать идеи Легко масштабировать решение Автоматизировать документацию Деплоить через Docker Работа над проектом продолжается: студенты развивают систему, добавляют фронтенд и расширяют функциональность. Это отличный пример того, как можно совместить академическую работу с практической реализацией реальной задачи.\nКод открыт и доступен на GitHub. Буду рад вопросам и предложениям по улучшению!\nПолезные ссылки:\nРепозиторий проекта Документация OpenSearch Go документация ","wordCount":"865","inLanguage":"en","datePublished":"2025-12-14T12:00:00+03:00","dateModified":"2025-12-14T12:00:00+03:00","author":{"@type":"Person","name":"akozadaev"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://akozadaev.github.io/myblog/posts/go-es-analytical-system/"},"publisher":{"@type":"Organization","name":"Персональный блог бэкенд-разработчика","logo":{"@type":"ImageObject","url":"https://akozadaev.github.io/myblog/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://akozadaev.github.io/myblog/ accesskey=h title="Персональный блог бэкенд-разработчика (Alt + H)">Персональный блог бэкенд-разработчика</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Рекомендательная система локаций для бизнеса: Go + OpenSearch</h1><div class=post-meta><span title='2025-12-14 12:00:00 +0300 MSK'>December 14, 2025</span>&nbsp;·&nbsp;<span>akozadaev</span></div></header><div class=post-content><p>Недавно я подготовил рабочий прототип проекта <a href=https://github.com/akozadaev/go_es_analytical_system>go_es_analytical_system</a> - рекомендательной системы для поиска и анализа локаций для различных типов бизнеса. Здесь <code>es</code> в названии появилось из-за того, что я плинировал Elasticsearch, но при разработке возникли сложности при получении соответствующего контейнера, поэтому в итоге используется OpenSearch.</p><p><strong>Важный момент</strong>: идея проекта принадлежит моим студентам, которые выбрали себе тему магистерской диссертации <strong>&ldquo;Разработка приложения для анализа бизнес-среды и выдачи рекомендаций по старту бизнеса&rdquo;</strong>. Да, одну на двоих. Сейчас это допустимо в рамках продолжения работ по дисциплине &ldquo;Проектная деятельность&rdquo;. У них была готова концепция и понимание, что нужно решить, а я предложил технологии и реализацию. Умение качественно оформить свои идеи привело к утверждению темы и к созданию данного прототипа. Я подготовил текущий рабочий прототип, а они будут дорабатывать систему, создавать фронтенд-часть и расширять функциональность.</p><p>Хочу поделиться опытом и рассказать, какие задачи решает эта система и какие технологии было решено использовать.</p><h2 id=зачем-это-нужно>Зачем это нужно?<a hidden class=anchor aria-hidden=true href=#зачем-это-нужно>#</a></h2><p>Представьте ситуацию: вы хотите открыть кафе, ресторан или магазин. Где лучше разместить бизнес? Какие факторы учесть?</p><ul><li><strong>Трафик</strong> - сколько людей проходит мимо локации</li><li><strong>Конкуренция</strong> - сколько похожих заведений уже есть рядом</li><li><strong>Демография</strong> - кто живёт и работает в этом районе</li><li><strong>Доступность</strong> - удобно ли добираться</li></ul><p>Ручной анализ таких данных занимает недели. Система делает это за секунды, используя комбинацию PostgreSQL для справочников и OpenSearch для полнотекстового поиска и ранжирования.</p><h2 id=архитектура-решения>Архитектура решения<a hidden class=anchor aria-hidden=true href=#архитектура-решения>#</a></h2><h3 id=технологический-стек>Технологический стек<a hidden class=anchor aria-hidden=true href=#технологический-стек>#</a></h3><ul><li><strong>Go</strong> - основной язык разработки</li><li><strong>OpenSearch</strong> - поиск и ранжирование локаций</li><li><strong>PostgreSQL</strong> - хранение справочников (типы бизнеса, регионы)</li><li><strong>Docker Compose</strong> - оркестрация сервисов</li><li><strong>Swagger/OpenAPI</strong> - автоматическая документация API</li></ul><h3 id=почему-именно-такой-стек>Почему именно такой стек?<a hidden class=anchor aria-hidden=true href=#почему-именно-такой-стек>#</a></h3><p><strong>Go</strong> - быстро, без зависимостей, один бинарник, умею. Идеально для микросервисов и CI/CD.</p><p><strong>OpenSearch</strong> - открытый поисковый движок, форк Elasticsearch, с поддержкой:</p><ul><li>Геопространственных запросов (geo_point)</li><li>Векторного поиска (dense_vector для kNN)</li><li>Полнотекстового поиска</li><li>Гибкого ранжирования</li><li>Полная совместимость с Elasticsearch API</li></ul><p>Выбор OpenSearch вместо Elasticsearch был сделан по нескольким причинам:</p><ul><li>Открытая лицензия (Apache 2.0)</li><li>Нет проблем с доступом к образам Docker</li><li>Активное развитие сообществом</li><li>Совместимость с существующими инструментами</li></ul><p><strong>PostgreSQL</strong> - надёжное хранение структурированных справочников с поддержкой транзакций.</p><h2 id=как-это-работает>Как это работает?<a hidden class=anchor aria-hidden=true href=#как-это-работает>#</a></h2><h3 id=алгоритм-рекомендаций>Алгоритм рекомендаций<a hidden class=anchor aria-hidden=true href=#алгоритм-рекомендаций>#</a></h3><p>Система использует трёхэтапный подход:</p><ol><li><p><strong>Фильтрация</strong>:</p><ul><li>По региону и городу</li><li>По типу бизнеса (локация должна подходить для запрошенного типа)</li></ul></li><li><p><strong>Ранжирование</strong>:</p><ul><li><strong>Traffic Score</strong> (0-10) - чем выше, тем лучше. Бустинг для локаций с score >= 7.0</li><li><strong>Competition Density</strong> (0-10) - чем ниже, тем лучше. Бустинг для локаций с density &lt;= 3.0</li><li><strong>Демография</strong> - соответствие целевой аудитории (возраст, доход, интересы)</li></ul></li><li><p><strong>Сортировка</strong>:</p><ul><li>По релевантности (комбинированный score)</li><li>По traffic_score (по убыванию)</li><li>По competition_density (по возрастанию)</li></ul></li></ol><h3 id=структура-данных-в-opensearch>Структура данных в OpenSearch<a hidden class=anchor aria-hidden=true href=#структура-данных-в-opensearch>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;loc_1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Локация 1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;address&#34;</span><span class=p>:</span> <span class=s2>&#34;ул. Примерная, д. 10, Москва&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;coordinates&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;lat&#34;</span><span class=p>:</span> <span class=mf>55.7558</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;lon&#34;</span><span class=p>:</span> <span class=mf>37.6173</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;region&#34;</span><span class=p>:</span> <span class=s2>&#34;Москва&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;city&#34;</span><span class=p>:</span> <span class=s2>&#34;Москва&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;business_types_suitable&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;cafe&#34;</span><span class=p>,</span> <span class=s2>&#34;restaurant&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;traffic_score&#34;</span><span class=p>:</span> <span class=mf>8.5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;competition_density&#34;</span><span class=p>:</span> <span class=mf>2.3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;demographics&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;age_group&#34;</span><span class=p>:</span> <span class=s2>&#34;26-35&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;average_income&#34;</span><span class=p>:</span> <span class=mi>75000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;interests&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;food&#34;</span><span class=p>,</span> <span class=s2>&#34;technology&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;population_density&#34;</span><span class=p>:</span> <span class=mi>5000</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;embedding&#34;</span><span class=p>:</span> <span class=p>[</span><span class=mf>0.1</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>,</span> <span class=err>...</span><span class=p>]</span> <span class=c1>// 128-мерный вектор для kNN
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><h2 id=api-и-использование>API и использование<a hidden class=anchor aria-hidden=true href=#api-и-использование>#</a></h2><h3 id=основные-эндпоинты>Основные эндпоинты<a hidden class=anchor aria-hidden=true href=#основные-эндпоинты>#</a></h3><p><strong>POST</strong> <code>/locations/recommend</code> - получить рекомендации:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST http://localhost:8080/locations/recommend <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;region&#34;: &#34;Москва&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;city&#34;: &#34;Москва&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;business_type&#34;: &#34;cafe&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;limit&#34;: 20
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span>
</span></span></code></pre></div><p><strong>GET</strong> <code>/locations/{id}</code> - детали локации</p><p><strong>GET</strong> <code>/business-types</code> - список типов бизнеса</p><p><strong>GET</strong> <code>/regions</code> - список регионов</p><h3 id=автоматическая-документация>Автоматическая документация<a hidden class=anchor aria-hidden=true href=#автоматическая-документация>#</a></h3><p>Проект использует <a href=https://github.com/swaggo/swag>swaggo/swag</a> для генерации OpenAPI документации из комментариев в коде:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>make swagger
</span></span><span class=line><span class=cl><span class=c1># Открыть http://localhost:8080/swagger/index.html</span>
</span></span></code></pre></div><p>Это экономит время на поддержке документации - она всегда актуальна.</p><h2 id=запуск-и-разработка>Запуск и разработка<a hidden class=anchor aria-hidden=true href=#запуск-и-разработка>#</a></h2><h3 id=быстрый-старт-с-docker>Быстрый старт с Docker<a hidden class=anchor aria-hidden=true href=#быстрый-старт-с-docker>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Запуск всех сервисов</span>
</span></span><span class=line><span class=cl>docker-compose up -d
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Индексация тестовых данных</span>
</span></span><span class=line><span class=cl>docker-compose <span class=nb>exec</span> app ./indexer
</span></span></code></pre></div><p>Система запускает:</p><ul><li>OpenSearch на порту 9200</li><li>OpenSearch Dashboards на порту 5601</li><li>PostgreSQL на порту 5432</li><li>Go приложение на порту 8080</li></ul><h3 id=локальная-разработка>Локальная разработка<a hidden class=anchor aria-hidden=true href=#локальная-разработка>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Запуск только БД и OpenSearch</span>
</span></span><span class=line><span class=cl>docker-compose up -d opensearch postgres
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Установка зависимостей</span>
</span></span><span class=line><span class=cl>go mod download
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Запуск сервера</span>
</span></span><span class=line><span class=cl>go run cmd/server/main.go
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Индексация данных</span>
</span></span><span class=line><span class=cl>go run cmd/indexer/main.go
</span></span></code></pre></div><h2 id=решённые-проблемы>Решённые проблемы<a hidden class=anchor aria-hidden=true href=#решённые-проблемы>#</a></h2><h3 id=1-выбор-поискового-движка>1. Выбор поискового движка<a hidden class=anchor aria-hidden=true href=#1-выбор-поискового-движка>#</a></h3><p>Изначально рассматривался Elasticsearch, но при работе с официальными образами иногда возникают проблемы с доступом (403 ошибки). Поэтому был выбран <strong>OpenSearch</strong> - открытый форк Elasticsearch, который:</p><ul><li>Полностью совместим с Elasticsearch API</li><li>Имеет открытую лицензию Apache 2.0</li><li>Не имеет проблем с доступом к образам Docker</li><li>Активно развивается сообществом</li></ul><h3 id=2-производительность-поиска>2. Производительность поиска<a hidden class=anchor aria-hidden=true href=#2-производительность-поиска>#</a></h3><p>Для ускорения поиска используется:</p><ul><li>Геопространственные индексы для координат</li><li>Векторные индексы для семантического поиска</li><li>Бустинг релевантных локаций в ранжировании</li></ul><h3 id=3-масштабируемость>3. Масштабируемость<a hidden class=anchor aria-hidden=true href=#3-масштабируемость>#</a></h3><p>Архитектура позволяет:</p><ul><li>Горизонтально масштабировать OpenSearch</li><li>Использовать read replicas для PostgreSQL</li><li>Добавлять кэширование (Redis) при необходимости</li></ul><h2 id=что-нужно-улучшить-и-доработать>Что нужно улучшить и доработать<a hidden class=anchor aria-hidden=true href=#что-нужно-улучшить-и-доработать>#</a></h2><p>Студенты планируют доработать следующие аспекты:</p><ol><li><strong>Фронтенд-часть</strong> - веб-интерфейс для визуализации рекомендаций и работы с данными</li><li><strong>Кэширование</strong> - добавить Redis для часто запрашиваемых рекомендаций</li><li><strong>ML-модели</strong> - использовать обученные модели для более точного ранжирования</li><li><strong>Real-time обновления</strong> - подписка на изменения через WebSocket</li><li><strong>Аналитика</strong> - сбор метрик использования API и визуализация данных</li><li><strong>A/B тестирование</strong> - сравнение разных алгоритмов ранжирования</li><li><strong>Расширенная аналитика</strong> - более глубокий анализ бизнес-среды</li></ol><p>Эти доработки желаемы, но не являются обязательством ребят. Они сделают то, что считают необходимым в рамках работы. Прототип, который мы сделали уже содержит значительную базу</p><h2 id=выводы>Выводы<a hidden class=anchor aria-hidden=true href=#выводы>#</a></h2><p>Проект показал, что комбинация Go + OpenSearch + PostgreSQL - мощный инструмент для построения рекомендательных систем. Особенно ценна возможность:</p><ul><li>Быстро прототипировать идеи</li><li>Легко масштабировать решение</li><li>Автоматизировать документацию</li><li>Деплоить через Docker</li></ul><p>Работа над проектом продолжается: студенты развивают систему, добавляют фронтенд и расширяют функциональность. Это отличный пример того, как можно совместить академическую работу с практической реализацией реальной задачи.</p><p>Код открыт и доступен на <a href=https://github.com/akozadaev/go_es_analytical_system>GitHub</a>. Буду рад вопросам и предложениям по улучшению!</p><hr><p><strong>Полезные ссылки:</strong></p><ul><li><a href=https://github.com/akozadaev/go_es_analytical_system>Репозиторий проекта</a></li><li><a href=https://opensearch.org/docs/latest/>Документация OpenSearch</a></li><li><a href=https://go.dev/doc/>Go документация</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://akozadaev.github.io/myblog/tags/go/>Go</a></li><li><a href=https://akozadaev.github.io/myblog/tags/opensearch/>Opensearch</a></li><li><a href=https://akozadaev.github.io/myblog/tags/postgresql/>Postgresql</a></li><li><a href=https://akozadaev.github.io/myblog/tags/%D0%BC%D0%B8%D0%BA%D1%80%D0%BE%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D1%8B/>Микросервисы</a></li><li><a href=https://akozadaev.github.io/myblog/tags/%D1%80%D0%B5%D0%BA%D0%BE%D0%BC%D0%B5%D0%BD%D0%B4%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B/>Рекомендательные Системы</a></li><li><a href=https://akozadaev.github.io/myblog/tags/%D0%BF%D1%80%D0%B5%D0%BF%D0%BE%D0%B4%D0%B0%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5/>Преподавание</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://akozadaev.github.io/myblog/>Персональный блог бэкенд-разработчика</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>